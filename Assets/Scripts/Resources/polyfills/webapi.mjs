var e={129:(e,t)=>{var s=Object.prototype.hasOwnProperty;function r(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch(e){return null}}function n(e){try{return encodeURIComponent(e)}catch(e){return null}}t.stringify=function(e,t){t=t||"";var r,i,o=[];for(i in"string"!=typeof t&&(t="?"),e)if(s.call(e,i)){if((r=e[i])||null!=r&&!isNaN(r)||(r=""),i=n(i),r=n(r),null===i||null===r)continue;o.push(i+"="+r)}return o.length?t+o.join("&"):""},t.parse=function(e){for(var t,s=/([^=?#&]+)=?([^&]*)/g,n={};t=s.exec(e);){var i=r(t[1]),o=r(t[2]);null===i||null===o||i in n||(n[i]=o)}return n}},418:e=>{e.exports=function(e,t){if(t=t.split(":")[0],!(e=+e))return!1;switch(t){case"http":case"ws":return 80!==e;case"https":case"wss":return 443!==e;case"ftp":return 21!==e;case"gopher":return 70!==e;case"file":return!1}return 0!==e}},564:(e,t,s)=>{var r=s(418),n=s(129),i=/^[\x00-\x20\u00a0\u1680\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]+/,o=/[\n\r\t]/g,a=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,l=/:\d+$/,h=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\\/]+)?([\S\s]*)/i,u=/^[a-zA-Z]:/;function p(e){return(e||"").toString().replace(i,"")}var c=[["#","hash"],["?","query"],function(e,t){return m(t.protocol)?e.replace(/\\/g,"/"):e},["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d*)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],d={hash:1,query:1};function _(e){var t,r=("undefined"!=typeof window?window:void 0!==s.g?s.g:"undefined"!=typeof self?self:{}).location||{},n={},i=typeof(e=e||r);if("blob:"===e.protocol)n=new g(unescape(e.pathname),{});else if("string"===i)for(t in n=new g(e,{}),d)delete n[t];else if("object"===i){for(t in e)t in d||(n[t]=e[t]);void 0===n.slashes&&(n.slashes=a.test(e.href))}return n}function m(e){return"file:"===e||"ftp:"===e||"http:"===e||"https:"===e||"ws:"===e||"wss:"===e}function f(e,t){e=(e=p(e)).replace(o,""),t=t||{};var s,r=h.exec(e),n=r[1]?r[1].toLowerCase():"",i=!!r[2],a=!!r[3],l=0;return i?a?(s=r[2]+r[3]+r[4],l=r[2].length+r[3].length):(s=r[2]+r[4],l=r[2].length):a?(s=r[3]+r[4],l=r[3].length):s=r[4],"file:"===n?l>=2&&(s=s.slice(2)):m(n)?s=r[4]:n?i&&(s=s.slice(2)):l>=2&&m(t.protocol)&&(s=r[4]),{protocol:n,slashes:i||m(n),slashesCount:l,rest:s}}function g(e,t,s){if(e=(e=p(e)).replace(o,""),!(this instanceof g))return new g(e,t,s);var i,a,l,h,d,y,b=c.slice(),v=typeof t,w=this,T=0;for("object"!==v&&"string"!==v&&(s=t,t=null),s&&"function"!=typeof s&&(s=n.parse),i=!(a=f(e||"",t=_(t))).protocol&&!a.slashes,w.slashes=a.slashes||i&&t.slashes,w.protocol=a.protocol||t.protocol||"",e=a.rest,("file:"===a.protocol&&(2!==a.slashesCount||u.test(e))||!a.slashes&&(a.protocol||a.slashesCount<2||!m(w.protocol)))&&(b[3]=[/(.*)/,"pathname"]);T<b.length;T++)"function"!=typeof(h=b[T])?(l=h[0],y=h[1],l!=l?w[y]=e:"string"==typeof l?~(d="@"===l?e.lastIndexOf(l):e.indexOf(l))&&("number"==typeof h[2]?(w[y]=e.slice(0,d),e=e.slice(d+h[2])):(w[y]=e.slice(d),e=e.slice(0,d))):(d=l.exec(e))&&(w[y]=d[1],e=e.slice(0,d.index)),w[y]=w[y]||i&&h[3]&&t[y]||"",h[4]&&(w[y]=w[y].toLowerCase())):e=h(e,w);s&&(w.query=s(w.query)),i&&t.slashes&&"/"!==w.pathname.charAt(0)&&(""!==w.pathname||""!==t.pathname)&&(w.pathname=function(e,t){if(""===e)return t;for(var s=(t||"/").split("/").slice(0,-1).concat(e.split("/")),r=s.length,n=s[r-1],i=!1,o=0;r--;)"."===s[r]?s.splice(r,1):".."===s[r]?(s.splice(r,1),o++):o&&(0===r&&(i=!0),s.splice(r,1),o--);return i&&s.unshift(""),"."!==n&&".."!==n||s.push(""),s.join("/")}(w.pathname,t.pathname)),"/"!==w.pathname.charAt(0)&&m(w.protocol)&&(w.pathname="/"+w.pathname),r(w.port,w.protocol)||(w.host=w.hostname,w.port=""),w.username=w.password="",w.auth&&(~(d=w.auth.indexOf(":"))?(w.username=w.auth.slice(0,d),w.username=encodeURIComponent(decodeURIComponent(w.username)),w.password=w.auth.slice(d+1),w.password=encodeURIComponent(decodeURIComponent(w.password))):w.username=encodeURIComponent(decodeURIComponent(w.auth)),w.auth=w.password?w.username+":"+w.password:w.username),w.origin="file:"!==w.protocol&&m(w.protocol)&&w.host?w.protocol+"//"+w.host:"null",w.href=w.toString()}g.prototype={set:function(e,t,s){var i=this;switch(e){case"query":"string"==typeof t&&t.length&&(t=(s||n.parse)(t)),i[e]=t;break;case"port":i[e]=t,r(t,i.protocol)?t&&(i.host=i.hostname+":"+t):(i.host=i.hostname,i[e]="");break;case"hostname":i[e]=t,i.port&&(t+=":"+i.port),i.host=t;break;case"host":i[e]=t,l.test(t)?(t=t.split(":"),i.port=t.pop(),i.hostname=t.join(":")):(i.hostname=t,i.port="");break;case"protocol":i.protocol=t.toLowerCase(),i.slashes=!s;break;case"pathname":case"hash":if(t){var o="pathname"===e?"/":"#";i[e]=t.charAt(0)!==o?o+t:t}else i[e]=t;break;case"username":case"password":i[e]=encodeURIComponent(t);break;case"auth":var a=t.indexOf(":");~a?(i.username=t.slice(0,a),i.username=encodeURIComponent(decodeURIComponent(i.username)),i.password=t.slice(a+1),i.password=encodeURIComponent(decodeURIComponent(i.password))):i.username=encodeURIComponent(decodeURIComponent(t))}for(var h=0;h<c.length;h++){var u=c[h];u[4]&&(i[u[1]]=i[u[1]].toLowerCase())}return i.auth=i.password?i.username+":"+i.password:i.username,i.origin="file:"!==i.protocol&&m(i.protocol)&&i.host?i.protocol+"//"+i.host:"null",i.href=i.toString(),i},toString:function(e){e&&"function"==typeof e||(e=n.stringify);var t,s=this,r=s.host,i=s.protocol;i&&":"!==i.charAt(i.length-1)&&(i+=":");var o=i+(s.protocol&&s.slashes||m(s.protocol)?"//":"");return s.username?(o+=s.username,s.password&&(o+=":"+s.password),o+="@"):s.password?(o+=":"+s.password,o+="@"):"file:"!==s.protocol&&m(s.protocol)&&!r&&"/"!==s.pathname&&(o+="@"),(":"===r[r.length-1]||l.test(s.hostname)&&!s.port)&&(r+=":"),o+=r+s.pathname,(t="object"==typeof s.query?e(s.query):s.query)&&(o+="?"!==t.charAt(0)?"?"+t:t),s.hash&&(o+=s.hash),o}},g.extractProtocol=f,g.location=_,g.trimLeft=p,g.qs=n,e.exports=g},372:(e,t,s)=>{const{asciiLowercase:r,solelyContainsHTTPTokenCodePoints:n,soleyContainsHTTPQuotedStringTokenCodePoints:i}=s(56);e.exports=class{constructor(e){this._map=e}get size(){return this._map.size}get(e){return e=r(String(e)),this._map.get(e)}has(e){return e=r(String(e)),this._map.has(e)}set(e,t){if(e=r(String(e)),t=String(t),!n(e))throw new Error(`Invalid MIME type parameter name "${e}": only HTTP token code points are valid.`);if(!i(t))throw new Error(`Invalid MIME type parameter value "${t}": only HTTP quoted-string token code points are valid.`);return this._map.set(e,t)}clear(){this._map.clear()}delete(e){return e=r(String(e)),this._map.delete(e)}forEach(e,t){this._map.forEach(e,t)}keys(){return this._map.keys()}values(){return this._map.values()}entries(){return this._map.entries()}[Symbol.iterator](){return this._map[Symbol.iterator]()}}},766:(e,t,s)=>{const r=s(372),n=s(172),i=s(400),{asciiLowercase:o,solelyContainsHTTPTokenCodePoints:a}=s(56);e.exports=class{constructor(e){e=String(e);const t=n(e);if(null===t)throw new Error(`Could not parse MIME type string "${e}"`);this._type=t.type,this._subtype=t.subtype,this._parameters=new r(t.parameters)}static parse(e){try{return new this(e)}catch(e){return null}}get essence(){return`${this.type}/${this.subtype}`}get type(){return this._type}set type(e){if(0===(e=o(String(e))).length)throw new Error("Invalid type: must be a non-empty string");if(!a(e))throw new Error(`Invalid type ${e}: must contain only HTTP token code points`);this._type=e}get subtype(){return this._subtype}set subtype(e){if(0===(e=o(String(e))).length)throw new Error("Invalid subtype: must be a non-empty string");if(!a(e))throw new Error(`Invalid subtype ${e}: must contain only HTTP token code points`);this._subtype=e}get parameters(){return this._parameters}toString(){return i(this)}isJavaScript({prohibitParameters:e=!1}={}){switch(this._type){case"text":switch(this._subtype){case"ecmascript":case"javascript":case"javascript1.0":case"javascript1.1":case"javascript1.2":case"javascript1.3":case"javascript1.4":case"javascript1.5":case"jscript":case"livescript":case"x-ecmascript":case"x-javascript":return!e||0===this._parameters.size;default:return!1}case"application":switch(this._subtype){case"ecmascript":case"javascript":case"x-ecmascript":case"x-javascript":return!e||0===this._parameters.size;default:return!1}default:return!1}}isXML(){return"xml"===this._subtype&&("text"===this._type||"application"===this._type)||this._subtype.endsWith("+xml")}isHTML(){return"html"===this._subtype&&"text"===this._type}}},172:(e,t,s)=>{const{removeLeadingAndTrailingHTTPWhitespace:r,removeTrailingHTTPWhitespace:n,isHTTPWhitespaceChar:i,solelyContainsHTTPTokenCodePoints:o,soleyContainsHTTPQuotedStringTokenCodePoints:a,asciiLowercase:l,collectAnHTTPQuotedString:h}=s(56);e.exports=e=>{e=r(e);let t=0,s="";for(;t<e.length&&"/"!==e[t];)s+=e[t],++t;if(0===s.length||!o(s))return null;if(t>=e.length)return null;++t;let u="";for(;t<e.length&&";"!==e[t];)u+=e[t],++t;if(u=n(u),0===u.length||!o(u))return null;const p={type:l(s),subtype:l(u),parameters:new Map};for(;t<e.length;){for(++t;i(e[t]);)++t;let s="";for(;t<e.length&&";"!==e[t]&&"="!==e[t];)s+=e[t],++t;if(s=l(s),t<e.length){if(";"===e[t])continue;++t}let r=null;if('"'===e[t])for([r,t]=h(e,t);t<e.length&&";"!==e[t];)++t;else{for(r="";t<e.length&&";"!==e[t];)r+=e[t],++t;if(r=n(r),""===r)continue}s.length>0&&o(s)&&a(r)&&!p.parameters.has(s)&&p.parameters.set(s,r)}return p}},400:(e,t,s)=>{const{solelyContainsHTTPTokenCodePoints:r}=s(56);e.exports=e=>{let t=`${e.type}/${e.subtype}`;if(0===e.parameters.size)return t;for(let[s,n]of e.parameters)t+=";",t+=s,t+="=",r(n)&&0!==n.length||(n=n.replace(/(["\\])/gu,"\\$1"),n=`"${n}"`),t+=n;return t}},56:(e,t)=>{t.removeLeadingAndTrailingHTTPWhitespace=e=>e.replace(/^[ \t\n\r]+/u,"").replace(/[ \t\n\r]+$/u,""),t.removeTrailingHTTPWhitespace=e=>e.replace(/[ \t\n\r]+$/u,""),t.isHTTPWhitespaceChar=e=>" "===e||"\t"===e||"\n"===e||"\r"===e,t.solelyContainsHTTPTokenCodePoints=e=>/^[-!#$%&'*+.^_`|~A-Za-z0-9]*$/u.test(e),t.soleyContainsHTTPQuotedStringTokenCodePoints=e=>/^[\t\u0020-\u007E\u0080-\u00FF]*$/u.test(e),t.asciiLowercase=e=>e.replace(/[A-Z]/gu,(e=>e.toLowerCase())),t.collectAnHTTPQuotedString=(e,t)=>{let s="";for(t++;;){for(;t<e.length&&'"'!==e[t]&&"\\"!==e[t];)s+=e[t],++t;if(t>=e.length)break;const r=e[t];if(++t,"\\"!==r)break;if(t>=e.length){s+="\\";break}s+=e[t],++t}return[s,t]}}},t={};function s(r){var n=t[r];if(void 0!==n)return n.exports;var i=t[r]={exports:{}};return e[r](i,i.exports,s),i.exports}s.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return s.d(t,{a:t}),t},s.d=(e,t)=>{for(var r in t)s.o(t,r)&&!s.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},s.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var r={};(()=>{s.d(r,{Z:()=>j});let e=0,t=new Map,n=new Map;const i={tick:function(e){let s=t;t=n,n=s,n.clear();for(const[s,r]of t)r(e)},exports:{requestAnimationFrame:function(t){return n.set(++e,t),e},cancelAnimationFrame:function(e){n.delete(e)}}};var o=Object.defineProperty,a=Object.defineProperties,l=Object.getOwnPropertyDescriptors,h=Object.getOwnPropertySymbols,u=Object.prototype.hasOwnProperty,p=Object.prototype.propertyIsEnumerable,c=(e,t,s)=>t in e?o(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,d=(e=>(e[e.NONE=0]="NONE",e[e.CAPTURING_PHASE=1]="CAPTURING_PHASE",e[e.AT_TARGET=2]="AT_TARGET",e[e.BUBBLING_PHASE=3]="BUBBLING_PHASE",e))(d||{});class _{constructor(e,t){this._type=e,t&&(this._bubbles=t.bubbles,this._cancelable=t.cancelable,this._composed=t.composed)}get bubbles(){return this._bubbles}get cancelable(){return this._cancelable}get composed(){return this._composed}get currentTarget(){return this._currentTarget}get defaultPrevented(){return this._defaultPrevented}get eventPhase(){return this._eventPhase}get isTrusted(){return this._isTrusted}get target(){return this._target}get timeStamp(){return this._timeStamp}get type(){return this._type}composedPath(){return[]}initEvent(e,t,s){this._type=e,this._bubbles=t,this._cancelable=s}preventDefault(){this.cancelable&&(this._defaultPrevented=!0)}stopImmediatePropagation(){this._defaultPrevented=!0,this.cancelBubble=!1}stopPropagation(){this._bubbles&&(this.cancelBubble=!0)}}class m extends _{constructor(e,t){super(e,t),t&&(this._lengthComputable=t.lengthComputable,this._loaded=t.loaded,this._total=t.total)}get lengthComputable(){return this._lengthComputable}get loaded(){return this._loaded}get total(){return this._total}}class f{constructor(){this._listeners={}}addEventListener(e,t,s){if(!t)return;e in this._listeners||(this._listeners[e]=[]);let r={listener:t};var n;"boolean"==typeof s?r.capture=s:"object"==typeof s&&(n=((e,t)=>{for(var s in t||(t={}))u.call(t,s)&&c(e,s,t[s]);if(h)for(var s of h(t))p.call(t,s)&&c(e,s,t[s]);return e})({},s),r=a(n,l({listener:t}))),this._listeners[e].push(r)}dispatchEvent(e){if(!e||"string"!=typeof e.type)return!0;const t=this._listeners[e.type];if(!t)return!0;const s=t.slice();if(!s.length)return!e.defaultPrevented;e._target=this;let r=[];for(const t of s){let s=null;if(s=t.listener.handleEvent?t.listener.handleEvent:t.listener,"function"==typeof s&&s.call(this,e),t.once&&r.push(t),e.defaultPrevented)break}for(let e=0;e<r.length;e++)t.splice(t.indexOf(r[e]),1);return!e.defaultPrevented}removeEventListener(e,t,s){if(!t||!(e in this._listeners))return;const r=this._listeners[e];for(let e=0;e<r.length;e++){const n=r[e];if(n.listener===t){let t=!0;if("boolean"==typeof s?t=n.capture==s:"object"==typeof s&&(t=n.capture==s.capture),t){r.splice(e,1);break}}}}clearEventListeners(e){"string"==typeof e?this._listeners[e]=void 0:void 0===e&&(this._listeners={})}}const g={exports:{Phase:d,Event:_,ProgressEvent:m,EventTarget:f}};class y{constructor(e,t,s,r=0){this.startTime=t,this.name=e,this.entryType=s,this.duration=r}toJSON(){return{duration:this.duration,entryType:this.entryType,name:this.name,startTime:this.startTime}}}class b extends y{}class v extends y{}const w="mark",T="measure";class E extends f{constructor(){super(),this._entries=new Map,this.timeOrigin=Date.now()}now(){return Date.now()-this.timeOrigin}getEntries(){let e=[];for(const[t,s]of this._entries)e=e.concat(s);return e}getEntriesByName(e,t){let s=[];for(const[r,n]of this._entries)t&&t!=r||n.map((t=>{t.name==e&&s.push(t)}));return s}getEntriesByType(e){return this._entries.get(e)}mark(e){const t=new b(e,this.now(),w);let s=this._entries.get(w);return s?s.push(t):(s=[t],this._entries.set(w,s)),t}measure(e,t,s){let r=this.getEntriesByName(t,w);if(0==r.length)throw new Error(`The mark '${t}' does not exist.`);let n=this.getEntriesByName(s,w);if(0==n.length)throw new Error(`The mark '${s}' does not exist.`);const i=r[r.length-1],o=n[n.length-1],a=new v(e,i.startTime,T,o.startTime-i.startTime);let l=this._entries.get(T);return l?l.push(a):(l=[a],this._entries.set(T,l)),a}clearMarks(e){let t=this._entries.get(w);t&&(t=t.filter((t=>t.name===e)),this._entries.set(w,t))}clearMeasures(e){let t=this._entries.get(w);t&&(t=t.filter((t=>t.name===e)),this._entries.set(T,t))}toJSON(){return{timeOrigin:this.timeOrigin}}}const S={exports:{Performance:E,PerformanceEntry:y,PerformanceMark:b,PerformanceMeasure:v,performance:new E}},P=globalThis["polyfill:csharp"],q={initialize:function(){Object.setPrototypeOf(P.System.Text.Encoding.ASCII,P.System.Text.Encoding.prototype),Object.setPrototypeOf(P.System.Text.Encoding.UTF8,P.System.Text.Encoding.prototype)},exports:{atob:function(e){let t=P.System.Convert.FromBase64String(e);return P.System.Text.Encoding.ASCII.GetString(t)},btoa:function(e){return P.System.Convert.ToBase64String(P.System.Text.Encoding.UTF8.GetBytes(e))}}};class R{constructor(){this._items=[]}get length(){return this._items.length}clear(){this._items=[],this.flush()}getItem(e){for(const t of this._items)if(t.key===e)return t.value;return null}key(e){for(let t=0;t<this._items.length;t++)if(t===e)return this._items[t].key;return null}removeItem(e){let t=-1;for(let s=0;s<this._items.length;s++)if(this._items[s].key===e){t=s;break}-1!=t&&(this._items.splice(t,1),this.flush())}setItem(e,t){let s=-1;for(let t=0;t<this._items.length;t++)if(this._items[t].key===e){s=t;break}-1!=s?this._items[s].value!=t&&(this._items[s].value=t,this.flush()):(this._items.push({key:e,value:t}),this.flush())}flush(){}}new R;const C={exports:{Storage:R,sessionStorage:new R,localStorage:new class extends R{constructor(e=`${P.UnityEngine.Application.persistentDataPath}/webapi/localStorage.json`){if(super(),this.$file=e,this.$directory=P.System.IO.Path.GetDirectoryName(this.$file),P.System.IO.File.Exists(e))try{const t=new P.System.IO.StreamReader(e),s=t.ReadToEnd();t.Close(),t.Dispose(),this._items=JSON.parse(s)}catch(t){throw new Error("Cannot open storage file "+e)}}flush(){P.System.IO.File.Exists(this.$directory)||P.System.IO.Directory.CreateDirectory(this.$directory);const e=new P.System.IO.StreamWriter(this.$file);if(!e)throw new Error("Cannot open storage file "+this.$file);{let t=JSON.stringify(this._items,void 0,"\t");e.Write(t),e.Flush(),e.Dispose()}}}}};var x=s(564),k=s.n(x),N=s(766),O=s.n(N),H=(e=>(e[e.Continue=100]="Continue",e[e.SwitchingProtocols=101]="SwitchingProtocols",e[e.OK=200]="OK",e[e.Created=201]="Created",e[e.Accepted=202]="Accepted",e[e.NonAuthoritativeInformation=203]="NonAuthoritativeInformation",e[e.NoContent=204]="NoContent",e[e.ResetContent=205]="ResetContent",e[e.PartialContent=206]="PartialContent",e[e.MultipleChoices=300]="MultipleChoices",e[e.Ambiguous=300]="Ambiguous",e[e.MovedPermanently=301]="MovedPermanently",e[e.Moved=301]="Moved",e[e.Found=302]="Found",e[e.Redirect=302]="Redirect",e[e.SeeOther=303]="SeeOther",e[e.RedirectMethod=303]="RedirectMethod",e[e.NotModified=304]="NotModified",e[e.UseProxy=305]="UseProxy",e[e.Unused=306]="Unused",e[e.TemporaryRedirect=307]="TemporaryRedirect",e[e.RedirectKeepVerb=307]="RedirectKeepVerb",e[e.BadRequest=400]="BadRequest",e[e.Unauthorized=401]="Unauthorized",e[e.PaymentRequired=402]="PaymentRequired",e[e.Forbidden=403]="Forbidden",e[e.NotFound=404]="NotFound",e[e.MethodNotAllowed=405]="MethodNotAllowed",e[e.NotAcceptable=406]="NotAcceptable",e[e.ProxyAuthenticationRequired=407]="ProxyAuthenticationRequired",e[e.RequestTimeout=408]="RequestTimeout",e[e.Conflict=409]="Conflict",e[e.Gone=410]="Gone",e[e.LengthRequired=411]="LengthRequired",e[e.PreconditionFailed=412]="PreconditionFailed",e[e.RequestEntityTooLarge=413]="RequestEntityTooLarge",e[e.RequestUriTooLong=414]="RequestUriTooLong",e[e.UnsupportedMediaType=415]="UnsupportedMediaType",e[e.RequestedRangeNotSatisfiable=416]="RequestedRangeNotSatisfiable",e[e.ExpectationFailed=417]="ExpectationFailed",e[e.UpgradeRequired=426]="UpgradeRequired",e[e.InternalServerError=500]="InternalServerError",e[e.NotImplemented=501]="NotImplemented",e[e.BadGateway=502]="BadGateway",e[e.ServiceUnavailable=503]="ServiceUnavailable",e[e.GatewayTimeout=504]="GatewayTimeout",e[e.HttpVersionNotSupported=505]="HttpVersionNotSupported",e))(H||{});class I extends f{addEventListener(e,t,s){super.addEventListener(e,t,s)}removeEventListener(e,t,s){super.addEventListener(e,t,s)}}var A=(e=>(e[e.UNSENT=0]="UNSENT",e[e.OPENED=1]="OPENED",e[e.HEADERS_RECEIVED=2]="HEADERS_RECEIVED",e[e.LOADING=3]="LOADING",e[e.DONE=4]="DONE",e))(A||{});class U extends I{constructor(){super(...arguments),this._request_headers={},this._poll_task_id=-1}get url(){return this._url}get readyState(){return this._readyState}set readyState(e){if(e!=this._readyState&&(this._readyState=e,this.onreadystatechange)){let e=new _("readystatechange");this.onreadystatechange.call(this,e),this.dispatchEvent(e)}}get response(){return this._response}get responseText(){return null}get responseURL(){return null}get responseXML(){return null}get status(){return 0}get upload(){return this._upload}abort(){}getAllResponseHeaders(){return""}getResponseHeader(e){return null}open(e,t,s,r,n){}overrideMimeType(e){this._overrided_mime=e}send(e){}setRequestHeader(e,t){this._request_headers[e.toLowerCase()]=t}addEventListener(e,t,s){super.addEventListener(e,t,s)}removeEventListener(e,t,s){super.removeEventListener(e,t,s)}$start_poll(){this.$stop_poll();const e=this.$tick.bind(this),t=()=>{this._poll_task_id=requestAnimationFrame(t),e()};this._poll_task_id=requestAnimationFrame(t)}$stop_poll(){-1!=this._poll_task_id&&(cancelAnimationFrame(this._poll_task_id),this._poll_task_id=-1)}$get_progress(){return{}}$dispatch_event(e){let t;switch(t="progress"===e?new m("progress",this.$get_progress()):new _(e),e){case"load":this.onload&&this.onload.call(this,t);break;case"loadend":this.onloadend&&this.onloadend.call(this,t);break;case"loadstart":this.onloadstart&&this.onloadstart.call(this,t);break;case"progress":this.onprogress&&this.onprogress.call(this,t);break;case"timeout":this.ontimeout&&this.ontimeout.call(this,t);break;case"abort":this.onabort&&this.onabort.call(this,t);break;case"error":this.onerror&&this.onerror.call(this,t)}this.dispatchEvent(t)}$tick(){}}const $={exports:{XMLHttpRequestEventTarget:I,XMLHttpRequestReadyState:A,XMLHttpRequestUpload:class extends I{},XMLHttpRequest:class extends U{constructor(){super()}get url(){return this._url}get status(){return this._status}get responseURL(){return this.url?this.url.url:null}get responseXML(){return this.responseText}get responseText(){if(this._request&&this._request.downloadHandler)return this._request.downloadHandler.text}getAllResponseHeaders(){let e="";if(this._internal_respons_headers){let t=this._internal_respons_headers.GetEnumerator();for(;t.MoveNext();)e+=`${t.Current.Key}: ${t.Current.Value}\r\n`}return e}getResponseHeader(e){return this._internal_respons_headers&&this._internal_respons_headers.ContainsKey(e)?this._internal_respons_headers.get_Item(e):""}open(e,t,s,r,n){this._url=function(e){const t=k()(e);return Object.assign(t,{url:e}),t}(t),this.url.port||(this._url.port="https"===this.url.protocal?443:80),this._method=e,this._readyState=A.UNSENT,this._connect_start_time=Date.now()}send(e){switch("object"==typeof e?(this.setRequestHeader("Content-Type","application/json; charset=utf-8"),e=JSON.stringify(e)):"string"===e&&("Content-Type"in this._request_headers||this.setRequestHeader("Content-Type","text/plain")),this._request_body=e,this._method){case"PUT":this._request=P.UnityEngine.Networking.UnityWebRequest.Put(this._url.url,this._request_body);break;case"POST":this._request=P.UnityEngine.Networking.UnityWebRequest.Put(this._url.url,this._request_body),this._request.method=this._method;break;case"GET":this._request=P.UnityEngine.Networking.UnityWebRequest.Get(this._url.url);break;case"DELETE":this._request=P.UnityEngine.Networking.UnityWebRequest.Delete(this._url.url);break;default:this._request=new P.UnityEngine.Networking.UnityWebRequest(this._url.url,this._method)}P.UnityEngine.Networking.UnityWebRequest.certificateHandler&&(this._request.disposeCertificateHandlerOnDispose=!1,this._request.certificateHandler=P.UnityEngine.Networking.UnityWebRequest.certificateHandler);for(let e of Object.getOwnPropertyNames(this._request_headers)){const t=this._request_headers[e];this._request.SetRequestHeader(e,t)}this._internal_request=this._request.SendWebRequest(),"number"==typeof this.timeout&&(this._timeout_until=Date.now()+this.timeout),this.$dispatch_event("loadstart"),this.$start_poll()}abort(){this._request&&(this._request.Abort(),this.$dispatch_event("abort"),this.$stop_poll())}$get_progress(){return{lengthComputable:void 0!==this._progress,loaded:this._progress,total:1}}$tick(){if(this._request){this._status=Number(this._request.responseCode),this._status&&(this.readyState=A.OPENED);const e=Date.now();if(this._timeout_until&&e>this._timeout_until)return this._request.Abort(),this.$dispatch_event("timeout"),this.$finished_load(),void(this._status=H.RequestTimeout);this._status=Number(this._request.responseCode)||H.Continue,this.readyState===A.OPENED&&(this._internal_respons_headers=this._request.GetResponseHeaders(),this._internal_respons_headers&&this._internal_respons_headers.Count&&(this.readyState=A.HEADERS_RECEIVED)),this.readyState===A.HEADERS_RECEIVED&&this._status==H.OK&&(this.readyState=A.LOADING),this._request.isNetworkError||this._request.isHttpError||this._request.isDone?this.$finished_load():this._internal_request&&this._progress!==this._internal_request.progress&&(this._progress=this._internal_request.progress,this.$dispatch_event("progress"))}}$finished_load(){this.readyState=A.DONE,(this._request.isDone||this._request.isHttpError)&&(this._internal_respons_headers=this._request.GetResponseHeaders(),this.$process_response()),this._request.isNetworkError||this._request.isHttpError?this.$dispatch_event("error"):(this._progress=1,this.$dispatch_event("progress"),this.$dispatch_event("load")),this.$dispatch_event("loadend"),this.$stop_poll()}$process_response(){if(void 0===this.responseType){const e=new(O())(this._overrided_mime||this.getResponseHeader("Content-Type")||"text/plain");"application"===e.type&&"json"===e.subtype?this.responseType="json":"text"===e.type||e.isXML()||e.isHTML()||e.isJavaScript()?this.responseType="text":this.responseType="arraybuffer"}switch(this.responseType){case"":case"document":case"text":this._response=this.responseText;break;case"json":const e=this.responseText;this._response=e?JSON.parse(e):null;break;default:this._response=this._request.downloadHandler?this._request.downloadHandler.data:null}}}}};let L=[];Object.defineProperty(globalThis,"WebAPI",{value:{tick:function(){for(const e of L)e.tick&&WebAPI.getHighResTimeStamp&&e.tick(WebAPI.getHighResTimeStamp())},finalize:function(){for(const e of L)e.uninitialize&&e.uninitialize()},getHighResTimeStamp:Date.now}}),function(e){Object.defineProperty(globalThis,"window",{value:globalThis});for(const t of e)if(t.initialize&&t.initialize(),t.exports)for(const e in t.exports)Object.defineProperty(window,e,{value:t.exports[e]});L=e}([i,g,S,q,C,$]);const j=window})();var n=r.Z;export{n as default};
//# sourceMappingURL=webapi.mjs.map